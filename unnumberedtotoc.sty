%% LaTeX2e file `unnumberedtotoc.sty'
%% generated by the `filecontents' environment
%% from source `unnnnnntmp' on 2014/11/10.
%%
    %Copyright 2014 Johannes BÃ¶ttcher
    %This is an alpha Version. Please be aware that there is
    %absolutely no warranty and use this package your own risk
    \ProvidesPackage{unnumberedtotoc}[2014/11/05 v.01 unnumbered chapters to toc]
    \RequirePackage{scrlfile}
    \RequirePackage{etoolbox}
    \newbool{@indentunnumbered}
    \DeclareOption{indentunnumbered}{\booltrue{@indentunnumbered}}
    \ProcessOptions*

    \ifundef{\KOMAClassName}{%
        \PackageWarningNoLine{unnumberedtotoc}{%
            ^^J adding some features also provided by the KOMA classes.
            ^^J Consider switching, as there are much more features with KOMA.
            ^^J Found at: https://github.com/johannesbottcher/unnumberedtotoc
        }
        \@ifclassloaded{memoir}{
            \typeout{Sorry, this wasn't tested with `memoir'}
        }{
        }
    }{\PackageInfo{unnumberedtotoc}{You are using a KOMA
    class. Nothing to do for me here. \protect \bye\space ;-)}
\endinput
}
\RequirePackage{tocbasic}
\RequirePackage{xparse}
\ifbool{@indentunnumbered}{
    \AfterPackage*{tocbasic}{\setuptoc{toc}{numberline}}
    \@ifpackageloaded{tocbibind}{\PackageWarningNoLine{unnumberedtotoc}{
        You loaded package `tocbibind' and requested option
        `indentunnumbered'. I am using a workaround to get this
        done
    }\AtBeginDocument{\def\nonumberline{\numberline{}}}}{
        \PreventPackageFromLoading[
            \PackageWarningNoLine{unnumberedtotoc}{
                `tocbibind' is not compatible with this package.^^J
                Please use the features described in the
                KOMA-documentation
            }
        ]{tocbibind}
    }
}{}

\renewcommand{\tableofcontents}{\listoftoc{toc}}
\newcommand*\listoftocname{\contentsname}

\ProvideDocumentCommand{\addchap}{ s o m }{%
    \chapter*{#3}%
    \markboth{}{}
    \IfBooleanTF{#1}{
    }{
        \IfNoValueTF{#2}{
            \addxcontentsline{toc}{chapter}{#3}
            \markboth{\MakeMarkcase{#3}}{}%
        }{%
            \addxcontentsline{toc}{chapter}{#2}
            \markboth{\MakeMarkcase{#2}}{}%
        }
    }
}

\ProvideDocumentCommand{\addsec}{ s o m }{%
    \section*{#3}%
    \markright{}
    \IfBooleanTF{#1}{
    }{
        \IfNoValueTF{#2}{
            \addxcontentsline{toc}{section}{#3}
            \markright{\MakeMarkcase{#3}}%
        }{%
            \addxcontentsline{toc}{section}{#2}
            \markright{\MakeMarkcase{#2}}%
        }
    }
}
    \endinput
